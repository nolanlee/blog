<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js CLI 常用工具 | Fresh Meat</title>
    <meta name="description" content="Nolan&#39;s Blog">
    <link rel="icon" href="/blog/images/logo.jpeg">
    
    <link rel="preload" href="/blog/assets/css/0.styles.db110bb5.css" as="style"><link rel="preload" href="/blog/assets/js/app.0cc8bb70.js" as="script"><link rel="preload" href="/blog/assets/js/3.33eeb52a.js" as="script"><link rel="preload" href="/blog/assets/js/4.2134f6c0.js" as="script"><link rel="preload" href="/blog/assets/js/15.5250d8e3.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.1b70c798.js"><link rel="prefetch" href="/blog/assets/js/11.c6cce770.js"><link rel="prefetch" href="/blog/assets/js/12.d5d84cab.js"><link rel="prefetch" href="/blog/assets/js/13.4eade371.js"><link rel="prefetch" href="/blog/assets/js/14.c3167d60.js"><link rel="prefetch" href="/blog/assets/js/16.47a50f85.js"><link rel="prefetch" href="/blog/assets/js/17.7985c64e.js"><link rel="prefetch" href="/blog/assets/js/5.2f2bd4a7.js"><link rel="prefetch" href="/blog/assets/js/6.fcd48acf.js"><link rel="prefetch" href="/blog/assets/js/7.b38140f2.js"><link rel="prefetch" href="/blog/assets/js/8.84fbbaf1.js"><link rel="prefetch" href="/blog/assets/js/9.21e49734.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.f6657fbf.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.db110bb5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/blog/" class="nav-link home-link">Fresh Meat
        </a></div> <div class="header-right-wrap"><!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/blog/" class="nav-link mobile-home-link">Fresh Meat
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <!----></div></div></div> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content content__default"><h1 id="node-js-cli-常用工具"><a href="#node-js-cli-常用工具" aria-hidden="true" class="header-anchor">#</a> Node.js CLI 常用工具</h1> <p>CLI 即 command-line interface，命令行工具。最近参与开发一个 CLI 脚手架工具，接触了一些好用的工具。</p> <p>首先，Node.js 内置了对命令操作的支持，在 package.json 的 bin 字段可以定义命令名称和关联的执行文件，执行文件一般放在 bin 目录下。这样如果 node module 是全局安装的，会自动在系统的 bin 目录下关联到执行文件，如果不是全局安装，会在 node_modules/.bin 目录下挂链。这样就可以直接在终端执行命令了。</p> <p>原始的 Node.js 命令行开发主要基于 process API 的 stdin 和 stdout，stdin 是一个 readable stream, stdout 是一个 writable stream，console.log 内部就是使用了 process.stdout。如下是一个简单的例子：</p> <div class="language-js extra-class"><pre class="language-js"><code>process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'readable'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> chunk<span class="token punctuation">;</span>
  <span class="token comment">// Use a loop to make sure we read all available data.</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>chunk <span class="token operator">=</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chunk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="commander"><a href="#commander" aria-hidden="true" class="header-anchor">#</a> commander</h2> <blockquote><p>the complete solution for node.js command-line programs, inspired by Ruby's commander -- TJ</p></blockquote> <p>一个快速开发 Node.js 命令行的工具，可以在自动解析命令和参数，具体使用方法参加项目的 README 或者 API 文档 <a href="http://tj.github.io/commander.js/" target="_blank" rel="noopener noreferrer">http://tj.github.io/commander.js/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，这里只列举一些简单的用法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> program <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'commander'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义特定命令需要执行的函数</span>
<span class="token keyword">function</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'..'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 初始化配置</span>
program
  <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">'0.1.0'</span><span class="token punctuation">)</span> <span class="token comment">// 设置版本号，用于  xxx -V 或者 --version 显示</span>
  <span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token string">'[options] &lt;file ...&gt;'</span><span class="token punctuation">)</span> <span class="token comment">// 用于 xxx -h 或者 --help 显示帮助信息</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'-i, --integer &lt;n&gt;'</span><span class="token punctuation">,</span> <span class="token string">'An integer argument'</span><span class="token punctuation">,</span> parseInt<span class="token punctuation">)</span> <span class="token comment">// 绑定初始化命令，接受参数，描述，对应的函数</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'-f, --float &lt;n&gt;'</span><span class="token punctuation">,</span> <span class="token string">'A float argument'</span><span class="token punctuation">,</span> parseFloat<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'-r, --range &lt;a&gt;..&lt;b&gt;'</span><span class="token punctuation">,</span> <span class="token string">'A range'</span><span class="token punctuation">,</span> range<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'-l, --list &lt;items&gt;'</span><span class="token punctuation">,</span> <span class="token string">'A list'</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解析输入</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' int: %j'</span><span class="token punctuation">,</span> program<span class="token punctuation">.</span>integer<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' float: %j'</span><span class="token punctuation">,</span> program<span class="token punctuation">.</span>float<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' optional: %j'</span><span class="token punctuation">,</span> program<span class="token punctuation">.</span>optional<span class="token punctuation">)</span><span class="token punctuation">;</span>
program<span class="token punctuation">.</span>range <span class="token operator">=</span> program<span class="token punctuation">.</span>range <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' range: %j..%j'</span><span class="token punctuation">,</span> program<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> program<span class="token punctuation">.</span>range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' list: %j'</span><span class="token punctuation">,</span> program<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><img src="/blog/images/commander-demo.webp" alt="commander-demo"> <h2 id="inquirer"><a href="#inquirer" aria-hidden="true" class="header-anchor">#</a> inquirer</h2> <blockquote><p>A collection of common interactive command line user interfaces
Strives to be an easily embeddable and beautiful command line interface for Node.js</p></blockquote> <p>用于命令行的交互，比如问题回答、选择等，通过 Promise 的方式，将问题的答案数据示例如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> questions <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请输入组件名称</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token function-variable function">validate</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token string">'不能为空'</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'version'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'请输入组件版本'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">validate</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token string">'不能为空'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'0.0.1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'ui'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'请选择基础组件库'</span><span class="token punctuation">,</span>
      choices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          value<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'无'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          value<span class="token punctuation">:</span> <span class="token string">'element'</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'Element UI'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          value<span class="token punctuation">:</span> <span class="token string">'vuetify'</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'Vuetify'</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'element'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'element-version'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'请选择版本号'</span><span class="token punctuation">,</span>
      choices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'^2.8.2'</span><span class="token punctuation">,</span> <span class="token string">'^1.4.3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'^2.8.2'</span><span class="token punctuation">,</span>
      <span class="token function">when</span><span class="token punctuation">(</span><span class="token parameter">answers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> answers<span class="token punctuation">.</span>ui <span class="token operator">===</span> <span class="token string">'element'</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'vuetify-version'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token string">'请选择版本号'</span><span class="token punctuation">,</span>
      choices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'^2.1.14'</span><span class="token punctuation">,</span> <span class="token string">'^1.5.21'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'^2.1.14'</span><span class="token punctuation">,</span>
      <span class="token function">when</span><span class="token punctuation">(</span><span class="token parameter">answers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> answers<span class="token punctuation">.</span>ui <span class="token operator">===</span> <span class="token string">'vuetify'</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>questions<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><img src="/blog/images/inquirer-demo.webp" alt="inquirer-demo"> <h2 id="chalk"><a href="#chalk" aria-hidden="true" class="header-anchor">#</a> chalk</h2> <p>提供了一组 API，可以便捷的更改终端输出文字的样式，如下是一个简单的例子，详情请移步 <a href="https://github.com/chalk/chalk" target="_blank" rel="noopener noreferrer">https://github.com/chalk/chalk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span>bold<span class="token punctuation">.</span>blue<span class="token punctuation">.</span><span class="token function">underline</span><span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ora"><a href="#ora" aria-hidden="true" class="header-anchor">#</a> ora</h2> <blockquote><p>Elegant terminal spinner</p></blockquote> <p>ora可以用在加载等待的场景中，针对加载结果成功、失败、警告等提供默认的图标和样式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ora <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ora'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> spinner <span class="token operator">=</span> <span class="token function">ora</span><span class="token punctuation">(</span><span class="token string">'Loading unicorns'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	spinner<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
	spinner<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'Loading rainbows'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="metalsmith"><a href="#metalsmith" aria-hidden="true" class="header-anchor">#</a> metalsmith</h2> <blockquote><p>An extremely simple, pluggable static site generator</p></blockquote> <p>用在批量处理模板的场景，特点是通过插件的方式来完成模板装载，本质是一个胶水框架。由于官方提供了一些 markdown 转换的插件，所以可以用来生成静态站点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Metalsmith  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'metalsmith'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">Metalsmith</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">metadata</span><span class="token punctuation">(</span>answers<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./.template'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">destination</span><span class="token punctuation">(</span><span class="token string">'./'</span> <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answers<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> _metalsmith<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> meta <span class="token operator">=</span> _metalsmith<span class="token punctuation">.</span><span class="token function">metadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>meta<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> camelName <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">camelCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> kebabName <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">kebabCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> element <span class="token operator">=</span> meta<span class="token punctuation">.</span>ui <span class="token operator">===</span> <span class="token string">'element'</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> mtd <span class="token operator">=</span> meta<span class="token punctuation">.</span>ui <span class="token operator">===</span> <span class="token string">'mtd'</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> t <span class="token operator">=</span> files<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span><span class="token punctuation">.</span>contents<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'package.json'</span><span class="token punctuation">,</span> <span class="token string">'description.json'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        files<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span><span class="token punctuation">.</span>contents <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>Handlebars<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">(</span>replaceData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="update-notifier"><a href="#update-notifier" aria-hidden="true" class="header-anchor">#</a> update-notifier</h2> <blockquote><p>Update notifications for your CLI app</p></blockquote> <p>用于在命令执行时提示是否有可更新的版本。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> updateNotifier <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'update-notifier'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./package.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">updateNotifier</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pkg<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#commander" title="commander">commander</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#inquirer" title="inquirer">inquirer</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#chalk" title="chalk">chalk</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ora" title="ora">ora</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#metalsmith" title="metalsmith">metalsmith</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#update-notifier" title="update-notifier">update-notifier</a></div></div></div></div> <footer class="footer" data-v-0d113134><div class="footer-left-wrap" data-v-0d113134><ul class="contact" data-v-0d113134></ul></div> <div class="footer-right-wrap" data-v-0d113134><ul class="copyright" data-v-0d113134></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.0cc8bb70.js" defer></script><script src="/blog/assets/js/3.33eeb52a.js" defer></script><script src="/blog/assets/js/4.2134f6c0.js" defer></script><script src="/blog/assets/js/15.5250d8e3.js" defer></script>
  </body>
</html>
